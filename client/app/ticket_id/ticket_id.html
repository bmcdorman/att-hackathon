<div ng-include="'components/navbar/navbar.html'"></div>

<div class="container">
	<div class="row">
		<div class="col-md-12" ng-switch="ticket.status">
			<h1>Lead Editor</h1>
			<ul class="list-inline">
			  <li><span ng-class="(ticket.status == 1 ? 'label label-success' : null)">Verify Lead</span></li>
			  <li><span class="glyphicon glyphicon-chevron-right"></span></li>
			  <li><span ng-class="(ticket.status == 2 ? 'label label-success' : null)">Finalize Quotes</span></li>
			  <li><span class="glyphicon glyphicon-chevron-right"></span></li>
			  <li><span ng-class="(ticket.status == 3 ? 'label label-success' : null)">Quote Summary</span></li>
			  <li><span class="glyphicon glyphicon-chevron-right"></span></li>
			  <li><span ng-class="(ticket.status == 4 ? 'label label-success' : null)">Other Stuff</span></li>
			  <li><span class="glyphicon glyphicon-chevron-right"></span></li>
			  <li><span ng-class="(ticket.status == 5 ? 'label label-success' : null)">More Stuff</span></li>
			</ul>
			<progressbar max="5" value="ticket.status" type="success"></progressbar>
			<div ng-switch-when="1">
			  <h3>Verify Lead</h3>
			  <div class="form-group">
			    <label for="lead-name">Lead Name</label>
			    <input type="text" ng-disabled="!ticket.open" class="form-control" id="lead-name" placeholder="Lead name" ng-model="lead.name">
			  </div>
			  <div class="form-group">
			    <label for="lead-address">Address</label>
			    <input type="text" ng-disabled="!ticket.open" class="form-control" id="lead-address" placeholder="Address" ng-model="lead.address">
			  </div>
			  <div class="form-group">
			    <label for="lead-phone">Phone Number</label>
			    <input type="tel" ng-disabled="!ticket.open" class="form-control" id="lead-phone" placeholder="Phone Number" ng-model="lead.phone">
			  </div>
			  <div class="checkbox">
			    <label>
			      <input type="checkbox" ng-disabled="!ticket.open" ng-model="lead.verified"> Verified
			    </label>
			  </div>
			</div>
			<div ng-switch-when="2">
			  	<h3>Finalize Quotes</h3>				  
			  	<accordion close-others="true">
				    <accordion-group ng-repeat="quote in quotes" heading="{{quote.service}} - ${{quote.given_price}}">
					    <form class="form-horizontal" role="form">
						 	<div class="form-group">
							    <label for="proposed-services" class="col-sm-2 control-label">Proposed Services</label>
						     	<div class="col-sm-10">
							    	<input type="text" ng-disabled="!ticket.open" class="form-control" id="proposed-services" placeholder="Proposed Services" ng-model="quote.service">
						    	</div>
						 	</div>
						 	<div class="form-group">
							    <label for="standard-price" class="col-sm-2 control-label">Standard Price</label>
						     	<div class="col-sm-10">
							    	<input type="number" ng-disabled="!ticket.open" class="form-control" id="standard-price" placeholder="Standard Price" ng-model="quote.std_price">
						    	</div>
						 	</div>
						 	<div class="form-group">
							    <label for="proposed-price" class="col-sm-2 control-label">Proposed Price</label>
						     	<div class="col-sm-10">
							    	<input type="number" ng-disabled="!ticket.open" class="form-control" id="proposed-price" placeholder="Proposed Price" ng-model="quote.given_price">
						    	</div>
						 	</div>
						 	<div class="form-group">
							    <label class="col-sm-2 control-label"></label>
						     	<div class="col-sm-10">
									<button type="button" ng-click="remove(quotes, $index)" class="btn btn-danger">Delete</button> 
						    	</div>
						 	</div>
					 	</form>
				    </accordion-group>
			  	</accordion>
			</div>
			<div ng-switch-when="3">
				<h1>Quote Summary</h1>
				<div class="well well-lg">
					<dl class="dl-horizontal">
					  	<dt>Current Services</dt>
					  	<dd>{{lead.available_services}}</dd>
						<dt>Competing Services</dt>
				  		<dd>{{lead.competitor_services}}</dd>
					</dl>
				</div>
				<div class="panel panel-default" ng-repeat="quote in quotes">
				  <div class="panel-heading">
				    <h3 class="panel-title">Quote #{{$index + 1}}</h3>
				  </div>
				  <div class="panel-body">
				    <dl class="dl-horizontal">
  					  <dt>Proposed Services</dt>
					  <dd>{{quote.service}}</dd>
					  <dt>Standard Price</dt>
					  <dd>{{quote.std_price}}</dd>
					  <dt>Proposed Price</dt>
					  <dd>{{quote.given_price}}</dd>
					</dl>
				  </div>
				</div>
			</div>
			<button ng-click="decrement()" class="btn btn-primary" ng-if="(ticket.status > 1)">Back</button> 
			<button ng-click="newQuote()" ng-disabled="!ticket.open" class="btn btn-info" ng-if="(ticket.status == 2)">New Quote</button> 
		  	<button ng-click="ticket.open = !ticket.open" class="btn btn-default">
		  		{{(ticket.open ? 'Freeze ' : 'Open')}} Ticket
	  		</button>
	  		<button ng-click="increment()" class="btn btn-primary" ng-if="(ticket.status < 5)">Next</button> 
		</div>
	</div>
</div>